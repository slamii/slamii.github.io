---
layout: post
title: Monads
---

### Why?
Functional languages are founded on the idea of function 
composition; having {% raw %}$f: A \rightarrow B${% endraw %} and 
{% raw %}$g: B \rightarrow C${% endraw %} we can create a composition
{% raw %}$g \circ f: A \rightarrow C${% endraw %}.
Suppose now those functions have some additional, common
flavour e.g. they may not return a result or print something in addition
to returning it.

In a strongly typed language we'd represent this additional behaviour by
a different type of the return value. Let's stick to the example of 
possibly not returning a value. We'd introduce a type constructor `Maybe`,
`M` for short, and our function would have signatures 
{% raw %}$f:A \rightarrow MB${% endraw %} and {% raw %}$g:B \rightarrow MC${% endraw %}.
We still do want to compose them; conceptually the additional behaviour
should hinder us in no way, but now the types are incompatible. We want 
to apply {% raw %}$g${% endraw %} after {% raw %}$f${% endraw %} but
{% raw %}$g${% endraw %} accepts type {% raw %}$B${% endraw %}, not
{% raw %}$MB${% endraw %}. We are stuck.

Taking a step back, another thing besides composition of functions that
we would like to employ is the identity function {% raw %}$id: A \rightarrow A${% endraw %},
a trivial computation for any type `A`. Now, it turns out that there is a
mathematical structure built on top of these two properties called a category.

It belongs to Category Theory, a mathematical area that tries to describe
things in the most general way possible. Thus the notion of a **category**
{% raw %}$\mathcal{C}${% endraw %} is very simple: it's a collection of: 
1. **objects** {% raw %}$A, B, \ldots${% endraw %}
2. **morphisms** or **arrows** (which you could think of as maps)


with objects of {% raw %}$\mathcal{C}${% endraw %}
as domain and codomain, e.g. {% raw %}$f:A \rightarrow B${% endraw %}.
The morphisms of corresponding domains and codomains are composable in
the way you'd expect and each object has its **identity morphism**
{% raw %}$id_A:A \rightarrow A${% endraw %} that acts trivially in
composition. For more details refer to 1.1 in [Johnstone notes].

Now, further into Category Theory, there is a notion of a **monad**.
Regardless of what is its mathematical definition 
(refer to 5.1 in [Johnstone notes]), a monad `M` on a category
{% raw %}$\mathcal{C}${% endraw %} gives us another category, the 
**Kleisli category** {% raw %}$\mathcal{C}_\mathbb{T}${% endraw %} whose morphisms 
are morphisms in {% raw %}$\mathcal{C}${% endraw %} of the form
{% raw %}$f:A\rightarrow MB${% endraw %}. The fact that it's a category
means we can compose those morphisms, and that's what we wanted all along!

### What?

Much in the spirit of the above reasoning the definition of a monad in
computer science as given by [nLab] is as follows:

> A _monad_ is a map {% raw %}$M${% endraw %}:
> 1. sending every type {% raw %}$X${% raw %} of a given programming language to a new type
{% raw %}$MX${% raw %}.
> 2. equipped with a rule for composing two functions of the form
{% raw %}$f: X \rightarrow MY${% endraw %} and 
{% raw %}$g: Y \rightarrow MZ${% endraw %} to {% raw %}$gf: X\longrightarrow MZ${% endraw %}.
The functions are called _Kleisli functions_ and the composition the
_Kleisli composition_.
> 3. together with a map {% raw %}$\mathrm{pure}_X: X\rightarrow MX${% endraw %}
for every type {% raw %}$X${% endraw %} that acts trivially in the composition.
The Kleisli composition is required to be [associative](https://en.wikipedia.org/wiki/Associative_property).

A definition offered by [Haskell All About Monads] is more down to earth.

> A _monad_ is:
> 1. a type constructor {% raw %}$m${% endraw %}
> 2. a function building values of type {% raw %}$m${% endraw %},
{% raw %}$a \rightarrow ma${% endraw %} for any type {% raw %}$a${% endraw %}
called _return_
> 3. a combinator function called _bind_ of the form
{% raw %}$(ma, a \rightarrow mb)\rightarrow mb${% endraw %} for any type
{% raw %}$a, b${% endraw %}.

The definition above has to also satisfy the laws equivalent to third point
in the first definition.


### Where?

### Background
The term **monad**, from Greek *monas*, "unit", was first used by Giordano Bruno.
He claimed the world is *homogeneous*, *one*. Nevertheless, it consists of a multitude
of self-contained units. Like a point, *mathematical minimum*, is a basic component of space,
and an atom, *physical minimum*, of that of matter - monad is a *metaphysical minimum*. Their
shapes and formes are unique (which followed naturally from God being the ultimate perfect
creator).


